<!--
  Generated template for the SalaryAllowanceDetailPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header no-border>
  <ion-navbar color="gongdan-color" hideBackButton="true">
    <ion-buttons left>
      <button ion-button icon-only (click)="goBack()">
        <ion-icon ios="ios-arrow-back" md="md-arrow-back"></ion-icon>
      </button>
    </ion-buttons>
    <ion-title>{{item.rt_name}}</ion-title>
  </ion-navbar>
</ion-header>


<ion-content style="background-color:#f0f2f5">
  <div class="div_all">
    <div text-wrap class="div_right"> {{item.department_name}}</div>
    <div class="left_label,div_left" text-right> 部门 </div>
  </div>
  <div class="div_all">
    <div text-wrap class="div_right"> {{item.rt_month}}</div>
    <div class="left_label,div_left" text-right> 发放月份 </div>
  </div>
  <div class="div_all">
    <div text-wrap class="div_right"> {{item.create_uid}}</div>
    <div class="left_label,div_left" text-right> 创建人 </div>
  </div>
  <div class="div_all">
    <div text-wrap class="div_right"> {{item.create_date}}</div>
    <div class="left_label,div_left" text-right> 创建时间 </div>
  </div>
  <div class="div_all" *ngIf="item.rt_to_approval_user_name">
    <div text-wrap class="div_right"> {{item.rt_to_approval_user_name}}</div>
    <div class="left_label,div_left" text-right> 待审核人 </div>
  </div>
  <div class="div_all" style="padding-bottom: 10px;">
    <div text-wrap class="div_right"> {{item.remark}}</div>
    <div class="left_label,div_left" text-right> 备注 </div>
  </div>
  
  <div class="div_label">
    明细
  </div>

  <ng-container *ngFor="let detail of item.rt_allowance_lines;let i  = index">
    <ion-item style="border-color: white;margin-bottom: 10px;" tappable (click)="click_employee_detail(detail)">
      <div>
        <p style="float:right;margin-right:5px;width: 40%;">职级：{{detail.rt_position_mixed}}</p>
        <p>姓名：{{detail.rt_employee_id}}</p>
      </div>

      <div style="margin-top: 5px;">
        <p style="float:right;margin-right:5px;width: 40%;">本次奖金：{{fmoney(transInt(detail.rt_money),3)}}</p>
        <p>入职日期：{{detail.rt_date_of_entry}}</p>
      </div>
      <div class="body_div_bottom_class">
        <p style="width: 33%;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;word-break: break-all;">
          备注：{{detail.rt_remark}}</p>
      </div>
    </ion-item>
  </ng-container>

  <div class="div_label">审批记录</div>
  <ion-list style="padding-bottom: 44px;">
    <ion-item no-lines *ngFor='let items of item.message_ids' style="overflow:hidden" class="middle_item">
      <img class="user_ava_class" src={{items.create_person_ava}}>
      <div style="overflow:hidden">
        <span class="span_employee_class">{{items.create_person}}</span>

        <span class="span_time_class">{{changeDate(items.create_time) | date:'yyyy-MM-dd HH:mm:ss'}}</span>
      </div>
      <p *ngIf="items.old_state || items.new_state" class="size_class">{{items.old_state}}=>{{items.new_state}}</p>
      <p text-wrap class="size_class">{{items.description}}</p>
    </ion-item>
  </ion-list>
</ion-content>

<ion-footer *ngIf="item.rt_to_approval_user_id == user_id">
  <div class="footer_class">
    <div class="left_btn" tappable (click)='cancel()'>
      拒绝
    </div>
    <div class="right_btn" tappable (click)='conform()'>
      同意
    </div>
  </div>
</ion-footer>