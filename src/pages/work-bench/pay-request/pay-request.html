<!--
  Generated template for the PayRequestPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>付款审核</ion-title>
  </ion-navbar>
  <ion-toolbar no-border-top>
    <ion-segment [(ngModel)]="pet">
      <ion-segment-button tappable (click)='clickMyApply()' value="1">
        我的申请
      </ion-segment-button>
      <ion-segment-button tappable (click)='clickWaitMeApply()' value="2">
        {{waitMeTitle}}
      </ion-segment-button>
      <ion-segment-button tappable (click)='clickAlreadyApply()' value="3">
        我已审批
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>


<ion-content style="background:#f0f0f0">
  <div [ngSwitch]="pet">
   <ng-template [ngSwitchCase]='1'>
      <ion-auto-complete style="width: 100vw;" (itemSelected)="itemSelected($event)" [dataProvider]="paymentAutoService"></ion-auto-complete>
      <ion-refresher (ionRefresh)="doRefresh($event)">
        <ion-refresher-content></ion-refresher-content>
      </ion-refresher>
  <ion-item-group style="background-color:#f2f2f2">
    <ion-item no-lines style="margin-top:10px;" *ngFor='let item of meList' tappable (click) = "clickMe(item)">
      <p style="float:right;margin-top:7px;color:orange;font-size:12px">待{{item.approve_id.name}}审核</p>
      <button ion-button style="background-color:white;color:white;border-color:white;border-width:0px;margin-left:10px;" small></button>
      <p style="font-size:16px;color:black;float:left;margin-top:7px;">{{item.name}}</p>
      <p style="font-size:14px;color:black;margin-top:-4px"></p>
      <p style="font-size:13px;color:orange;float:right;">¥{{item.amount}}</p>
      <p style="margin-top:3px;">创建人：{{item.create_uid.name}} {{item.create_date}}</p>
      <p style="margin-top:3px;">合作伙伴：{{item.parent_id.name}}</p>
    </ion-item>
  </ion-item-group>
    <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
        <ion-infinite-scroll-content></ion-infinite-scroll-content>
    </ion-infinite-scroll>
  </ng-template>

<ng-template [ngSwitchCase]='2'>
      <ion-auto-complete style="width: 100vw;" (itemSelected)="itemSelected($event)" [dataProvider]="paymentAutoService"></ion-auto-complete>
      <ion-refresher (ionRefresh)="doRefresh($event)">
        <ion-refresher-content></ion-refresher-content>
      </ion-refresher>
  <ion-item-group style="background-color:#f2f2f2">
    <ion-item no-lines style="margin-top:10px;" *ngFor='let item of waitMeList' tappable (click) = "clickEdit(item)">
      <p style="float:right;margin-top:7px;color:orange;font-size:12px">待{{item.approve_id.name}}审核</p>
      <button ion-button style="background-color:white;color:white;border-color:white;border-width:0px;margin-left:10px;" small></button>
      <p style="font-size:16px;color:black;float:left;margin-top:7px;">{{item.name}}</p>
      <p style="font-size:14px;color:black;margin-top:-4px"></p>
      <p style="font-size:13px;color:orange;float:right;">¥{{item.amount}}</p>
      <p style="margin-top:3px;">创建人：{{item.create_uid.name}} {{item.create_date}}</p>
      <p style="margin-top:3px;">合作伙伴：{{item.parent_id.name}}</p>
    </ion-item>
  </ion-item-group>
    <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
        <ion-infinite-scroll-content></ion-infinite-scroll-content>
    </ion-infinite-scroll>
  </ng-template>

  <ng-template [ngSwitchCase]='3'>
      <ion-auto-complete style="width: 100vw;" (itemSelected)="itemSelected($event)" [dataProvider]="paymentAutoService"></ion-auto-complete>
      <ion-refresher (ionRefresh)="doRefresh($event)">
        <ion-refresher-content></ion-refresher-content>
      </ion-refresher>
  <ion-item-group style="background-color:#f2f2f2">
    <ion-item no-lines style="margin-top:10px;" *ngFor='let item of alreadyList' tappable (click) = "clickALready(item)">
      <p style="float:right;margin-top:7px;color:orange;font-size:12px">待{{item.approve_id.name}}审核</p>
      <button ion-button style="background-color:white;color:white;border-color:white;border-width:0px;margin-left:10px;" small></button>
      <p style="font-size:16px;color:black;float:left;margin-top:7px;">{{item.name}}</p>
      <p style="font-size:14px;color:black;margin-top:-4px"></p>
      <p style="font-size:13px;color:orange;float:right;">¥{{item.amount}}</p>
      <p style="margin-top:3px;">创建人：{{item.create_uid.name}} {{item.create_date}}</p>
      <p style="margin-top:3px;">合作伙伴：{{item.parent_id.name}}</p>
    </ion-item>
  </ion-item-group>
    <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
        <ion-infinite-scroll-content></ion-infinite-scroll-content>
    </ion-infinite-scroll>
  </ng-template>

  </div>
</ion-content>
